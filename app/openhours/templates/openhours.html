{% extends 'layout.html' %}

{% block body %}
  <div class="header-inline">
    <h1>Open Hours</h1>
      {% if session.admin %}
        <div class="">
          <a class="btn btn-primary" href="{{url_for('openhours.signup_email')}}">Send Signup Email for {{ next_month }}</a>
        </div>
      {% endif %}
  </div>
  <table class="table table-striped">
    <tr>
      <th>Date</th>
      <th>Volunteers</th>
      <th>Shoppers</th>
      <th></th>
    </tr>
    {% for openhour in openhours.items %}
      <tr>
        {% if (session.user) and (session.user=='admin') %}
          <td><a href="{{url_for('openhours.show_openhour', id=openhour.id)}}">{{ openhour.date.strftime('%m/%d/%y') }}</a></td>
        {% else %}
          <td>{{ openhour.date.strftime('%m/%d/%y') }}</td>
        {% endif %}
        <td>
          {% for volunteer in openhour.volunteers %}
            <span> {{volunteer.name}}{{ "," if not loop.last }}</span>
          {% endfor %}
        </td>
        <td>
          {% for shopper in openhour.shoppers %}
            <span>{{shopper.name}}{{ "," if not loop.last }}</span>
          {% endfor %}
        </td>
        {% if not openhour.notes %}
          <td><a class="btn btn-default" href="{{ url_for('openhours.new_notes', id=openhour.id)}}">Add Notes</a></td>
        {% else %}
          <td></td>
        {% endif %}
    </tr>
  {% endfor %}
  </table>

  <div class="pag-nav">
    {% if openhours.has_prev %}
      <a href="{{ url_for('openhours.openhours_pag', page_num=openhours.prev_num) }}">&lt;&lt; Newer </a>
    {% else %}
      &lt;&lt; Newer
    {% endif %}
     |
    {% if openhours.has_next %}
      <a href="{{ url_for('openhours.openhours_pag', page_num=openhours.next_num) }}">Older &gt;&gt;</a>
    {% else %}
      Older &gt;&gt;
    {% endif %}
  </div>


  <!-- {% for page in openhours.iter_pages() %}
    {% if page %}
      <a class="pag-nav" href="{{url_for('openhours.openhours_pag', page_num=page)}}">{{ page }}</a>
    {% endif %}
  {% endfor %} -->

{% endblock %}
